{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import'./Navbar.css';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Navbar=()=>{const[isLoggedIn,setIsLoggedIn]=useState(false);const[user,setUser]=useState(null);const navigate=useNavigate();// Check login status on component mount and when localStorage changes\nuseEffect(()=>{const checkLoginStatus=()=>{const userData=localStorage.getItem('user');if(userData){try{const parsedUser=JSON.parse(userData);setUser(parsedUser);setIsLoggedIn(true);}catch(error){console.error('Error parsing user data:',error);localStorage.removeItem('user');setIsLoggedIn(false);setUser(null);}}else{setIsLoggedIn(false);setUser(null);}};checkLoginStatus();// Listen for storage changes (e.g., login/logout in another tab)\nwindow.addEventListener('storage',checkLoginStatus);return()=>{window.removeEventListener('storage',checkLoginStatus);};},[]);const handleLogout=()=>{localStorage.removeItem('user');setIsLoggedIn(false);setUser(null);navigate('/');};return/*#__PURE__*/_jsx(\"nav\",{className:\"navbar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"navbar-logo\",children:\"EventHub\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"nav-menu\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"nav-links\",children:\"Home\"})}),isLoggedIn&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/user\",className:\"nav-links\",children:\"Add Event\"})}),!isLoggedIn&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"nav-links\",children:\"Login\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"nav-links\",children:\"Register\"})})]}),isLoggedIn&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"nav-links welcome-text\",children:[\"Welcome, \",(user===null||user===void 0?void 0:user.name)||'User']})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"nav-links logout-btn\",children:\"Logout\"})})]})]})]})});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Navbar","isLoggedIn","setIsLoggedIn","user","setUser","navigate","checkLoginStatus","userData","localStorage","getItem","parsedUser","JSON","parse","error","console","removeItem","window","addEventListener","removeEventListener","handleLogout","className","children","to","name","onClick"],"sources":["C:/Users/Kiuadmin/Desktop/annaa/Community-Board/frontend/src/components/Navbar/Navbar.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport './Navbar.css';\r\n\r\nconst Navbar = () => {\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  // Check login status on component mount and when localStorage changes\r\n  useEffect(() => {\r\n    const checkLoginStatus = () => {\r\n      const userData = localStorage.getItem('user');\r\n      if (userData) {\r\n        try {\r\n          const parsedUser = JSON.parse(userData);\r\n          setUser(parsedUser);\r\n          setIsLoggedIn(true);\r\n        } catch (error) {\r\n          console.error('Error parsing user data:', error);\r\n          localStorage.removeItem('user');\r\n          setIsLoggedIn(false);\r\n          setUser(null);\r\n        }\r\n      } else {\r\n        setIsLoggedIn(false);\r\n        setUser(null);\r\n      }\r\n    };\r\n\r\n    checkLoginStatus();\r\n\r\n    // Listen for storage changes (e.g., login/logout in another tab)\r\n    window.addEventListener('storage', checkLoginStatus);\r\n    \r\n    return () => {\r\n      window.removeEventListener('storage', checkLoginStatus);\r\n    };\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('user');\r\n    setIsLoggedIn(false);\r\n    setUser(null);\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <nav className=\"navbar\">\r\n      <div className=\"navbar-container\">\r\n        <Link to=\"/\" className=\"navbar-logo\">\r\n          EventHub\r\n        </Link>\r\n        \r\n        <ul className=\"nav-menu\">\r\n          <li className=\"nav-item\">\r\n            <Link to=\"/\" className=\"nav-links\">\r\n              Home\r\n            </Link>\r\n          </li>\r\n\r\n          {isLoggedIn && (\r\n            <li className=\"nav-item\">\r\n              <Link to=\"/user\" className=\"nav-links\">\r\n                Add Event\r\n              </Link>\r\n            </li>\r\n          )}\r\n\r\n          {!isLoggedIn && (\r\n            <>\r\n              <li className=\"nav-item\">\r\n                <Link to=\"/login\" className=\"nav-links\">\r\n                  Login\r\n                </Link>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                <Link to=\"/register\" className=\"nav-links\">\r\n                  Register\r\n                </Link>\r\n              </li>\r\n            </>\r\n          )}\r\n\r\n          {isLoggedIn && (\r\n            <>\r\n              <li className=\"nav-item\">\r\n                <span className=\"nav-links welcome-text\">\r\n                  Welcome, {user?.name || 'User'}\r\n                </span>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                <button \r\n                  onClick={handleLogout}\r\n                  className=\"nav-links logout-btn\"\r\n                >\r\n                  Logout\r\n                </button>\r\n              </li>\r\n            </>\r\n          )}\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}